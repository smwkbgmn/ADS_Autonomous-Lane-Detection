# Lane Detection System Configuration

# CARLA Settings
carla:
  host: "carla-server.local"
  port: 2000
  vehicle_type: "vehicle.tesla.model3"

# Camera Settings
camera:
  width: 800
  height: 600
  fov: 90.0
  position:
    x: 2.0   # Forward from vehicle center
    y: 0.0   # Right from vehicle center
    z: 1.5   # Up from vehicle center
  rotation:
    pitch: -10.0  # Tilt down
    yaw: 0.0
    roll: 0.0

# Lane Detection - Computer Vision
cv_detector:
  # Canny edge detection
  canny_low: 50
  canny_high: 150

  # Hough transform
  hough_rho: 2
  hough_theta: 0.017453  # 1 degree in radians
  hough_threshold: 50
  hough_min_line_len: 40
  hough_max_line_gap: 100

  # Temporal smoothing
  smoothing_factor: 0.7

# Lane Detection - Deep Learning
dl_detector:
  model_type: "simple"  # or "full"
  input_size: [256, 256]
  threshold: 0.5
  model_path: null  # Path to pretrained weights

# Lane Analysis
lane_analyzer:
  drift_threshold: 0.15      # 15% of lane width
  departure_threshold: 0.35  # 35% of lane width
  lane_width_meters: 3.7     # Standard US highway lane

  # Steering controller gains
  kp: 0.5  # Proportional gain
  kd: 0.1  # Derivative gain

# Throttle Control Policy
# Adaptive throttle reduces speed during sharp turns to prevent overshooting
throttle_policy:
  base: 0.45              # Base throttle when steering is minimal
  min: 0.18               # Minimum throttle during sharp turns
  steer_threshold: 0.15   # Steering magnitude to start reducing throttle
  steer_max: 0.70         # Maximum expected steering magnitude

# Visualization
visualization:
  show_hud: true
  show_steering: true
  fill_lane: true
  enable_alerts: true
  save_video: false
  video_path: "output.mp4"

# System
system:
  detection_method: "cv"  # "cv" or "dl"
  target_fps: 30
  enable_logging: true
  log_file: "lkas.log"
